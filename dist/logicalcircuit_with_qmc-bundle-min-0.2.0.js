class LogicalCircuitCore{#t={};#e;#s=["OR","NOR","AND","NAND","XOR","NXOR","NOT","BREAK","CASE","CATCH","CLASS","CONST","CONTINUE","DEBUGGER","DEFAULT","DELETE","DO","ELSE","EXPORT","EXTENDS","FALSE","FINALLY","FOR","FUNCTION","IF","IMPORT","IN","INSTANCEOF","NEW","NULL","RETURN","SUPER","SWITCH","THIS","THROW","TRUE","TRY","TYPEOF","VAR","VOID","WHILE","WITH","LET","STATIC","YIELD","AWAIT","ENUM","IMPLEMENTS","INTERFACE","PACKAGE","PRIVATE","PROTECTED","PUBLIC","ABSTRACT","BOOLEAN","BYTE","CHAR","DOUBLE","FINAL","FLOAT","GOTO","INT","LONG","NATIVE","SHORT","SYNCHRONIZED","THROWS","TRANSIENT","VOLATILE","ARGUMENTS","AS","ASYNC","EVAL","FROM","GET","OF","SET"];#i=["OR","NOR","AND","NAND","XOR","NXOR","NOT"];#o={OR:"||",AND:"&&",XOR:"+",NOR:"||",NAND:"&&",NXOR:"+"};#n={OR:"",AND:"",XOR:"===1",NOR:"",NAND:"",NXOR:"!==1"};constructor(){}setJSON(t){this.#t=JSON.parse(JSON.stringify(t))}getJSON(){return JSON.parse(JSON.stringify(this.#t))}setSimplifier(t){this.#e=t}simplify(){if(this.#e&&this.isValid()){var t={};Object.keys(this.#t).filter((t=>"IN"===this.#t[t].type)).forEach((e=>t[e]={type:"IN"}));var e=!0;return Object.keys(this.#t).filter((t=>"OUT"===this.#t[t].type)).forEach((s=>{var i=[];this.#h(s,i);for(var o=[],n=0;n<Math.pow(2,i.length);n++){var h={},r=n.toString(2).padStart(i.length,"0");i.forEach(((t,e)=>h[t]=!!parseInt(r[e]))),this.computeExpression(s,h)&&o.push(n)}t[s]={type:"OUT",from:[]};try{var a=this.#e(o);this.#r(t,s,i,a)}catch(t){e=!1}})),e&&(this.#t=t),e}return!1}#h(t,e){"IN"===this.#t[t].type?e.includes(t)||e.push(t):"NOT"===this.#t[t].type?this.#h(this.#t[t].from[0],e):this.#t[t].from.forEach((t=>this.#h(t,e)))}#r(t,e,s,i){if(1===(i=i.split(" OR ")).length)this.#a(t,e,s,i[0]);else{var o=this.#l("OR");t[o]={type:"OR",from:[]},i.forEach((e=>this.#a(t,o,s,e))),t[e].from.push(o)}}#a(t,e,s,i){if(1===(i=i.replace("(","").replace(")","").split(" AND ")).length)this.#c(t,e,s,i[0]);else{var o=this.#l("AND");t[o]={type:"AND",from:[]},i.forEach((e=>this.#c(t,o,s,e))),t[e].from.push(o)}}#c(t,e,s,i){if(i.startsWith("NOT ")){var o=this.#l("NOT");t[o]={type:"NOT",from:[s[i.charCodeAt(4)-65]]},t[e].from.push(o)}else t[e].from.push(s[i.charCodeAt(0)-65])}computeExpressions(t){var e={};return this.isValid()&&Object.keys(this.#t).filter((t=>"OUT"===this.#t[t].type)).forEach((s=>e[s]=this.computeExpression(s,t))),e}computeExpression(name,parameters){var result;if(this.isValid()&&this.#t[name]&&"OUT"===this.#t[name].type){var toEval=Object.keys(parameters).reduce(((t,e)=>t+"var "+e+" = "+parameters[e]+";\n"),"");toEval+="result = "+this.getJavaScriptExpression(name)+";",eval(toEval)}return result}getJavaScriptExpressions(){var t={};return this.isValid()&&Object.keys(this.#t).filter((t=>"OUT"===this.#t[t].type)).forEach((e=>t[e]=this.#u(this.#t[e].from[0],!1))),t}getJavaScriptExpression(t){return this.isValid()&&this.#t[t]&&"OUT"===this.#t[t].type?this.#u(this.#t[t].from[0],!1):""}#u(t,e){if("IN"===this.#t[t].type)return t;if("NOT"===this.#t[t].type)return"!"+this.#u(this.#t[t].from[0],!0);var s=this.#t[t].from.map((t=>this.#u(t,!0)));switch(this.#t[t].type){case"OR":case"AND":case"XOR":case"NXOR":return(e?"(":"")+s.join(this.#o[this.#t[t].type])+this.#n[this.#t[t].type]+(e?")":"");case"NOR":case"NAND":return"!("+s.join(this.#o[this.#t[t].type])+")"}}isValid(){return Object.keys(this.#t).filter((t=>"OUT"===this.#t[t].type)).reduce(((t,e)=>t&&this.#d(e)),!0)}#d(t){var e=!0;return this.#t[t].from.forEach((t=>{(e&=!!t)&&"IN"!==this.#t[t].type&&(e&=!!this.#d(t))})),!!e}isEmpty(){return!Object.keys(this.#t).length}addInput(t){return this.#m(t,{type:"IN"})}addOutput(t){return this.#m(t,{type:"OUT",from:[""]})}addOR(){return this.#f("OR",["",""])}addNOR(){return this.#f("NOR",["",""])}addAND(){return this.#f("AND",["",""])}addNAND(){return this.#f("NAND",["",""])}addXOR(){return this.#f("XOR",["",""])}addNXOR(){return this.#f("NXOR",["",""])}addNOT(){return this.#f("NOT",[""])}#f(t,e){var s=this.#l(t);return this.#m(s,{type:t,from:e},!0),s}#m(t,e,s){return(s||!(!this.isNameValid(t)||this.isNameAlreadyUsed(t)))&&(this.#t[t]=e,!0)}#l(t){return"$_"+t.padEnd(5,"_")+(new Date).getTime()+"_"+parseInt(1e4*Math.random()).toFixed(0).padStart(4,"0")}incConnector(t){this.#t[t]&&!["IN","OUT","NOT"].includes(this.#t[t].type)&&this.#t[t].from.push("")}decConnector(t){if(this.#t[t]&&!["IN","OUT","NOT"].includes(this.#t[t].type)&&this.#t[t].from.length>2){var e=this.#t[t].from.indexOf("");-1!==e?this.#t[t].from.splice(e,1):this.#t[t].from.pop()}}addConnection(t,e,s){this.isConnectionValid(t,e)&&0<=s&&s<this.#t[e].from.length&&(this.#t[e].from[s]=t)}isConnectionValid(t,e){return!(t===e||!this.#t[t]||!this.#t[e])&&("IN"===this.#t[t].type?"IN"!==this.#t[e].type:"OUT"!==this.#t[t].type&&("IN"!==this.#t[e].type&&("OUT"===this.#t[e].type||!this.#p(t,e))))}#p(t,e){var s=Object.keys(this.#t).filter((t=>this.#i.includes(this.#t[t].type)&&this.#t[t].from.includes(e)));return s.includes(t)||s.reduce(((e,s)=>e||this.#p(t,s)),!1)}removeConnection(t,e){this.#t[t]&&this.#t[t].from&&0<=e&&e<this.#t[t].from.length&&(this.#t[t].from[e]="")}remove(t){this.#t[t]&&(delete this.#t[t],Object.keys(this.#t).filter((t=>"IN"!==this.#t[t].type)).forEach((e=>this.#t[e].from=this.#t[e].from.map((e=>e===t?"":e)))))}clear(){this.#t={}}getType(t){return this.#t[t]?this.#t[t].type:""}getFrom(t){return this.#t[t]&&"IN"!==this.#t[t].type?this.#t[t].from.slice():[]}isNameValid(t){return"string"==typeof t&&/^[a-z]+[a-z0-9_]*$/i.test(t)&&!this.#s.includes(t.toUpperCase())}isNameAlreadyUsed(t){return!!this.#t[t]}addBlackListWord(t){t&&this.#s.push(t.toUpperCase())}}class LogicalCircuitUI{#b;#y=new LogicalCircuitCore;#v={};#g={width:800,height:600,font:"24px sans-serif",lineWidth:2,strokeStyle:"black",fillStyle:"black",cursor:"default",bezierConnector:!1,showOperatorType:!1,interactive:!1};#O={index:0,array:[{json:"{}",jsonUI:"{}"}]};#N=[];#I=[];#x;#S;constructor(t,e){this.#b="LogicalCircuitUI_Container_"+(new Date).getTime()+"_"+parseInt(1e3*Math.random());try{e.width}catch(t){e={}}this.#g.width=isNaN(e.width)||e.width<0?this.#g.width:e.width,this.#g.height=isNaN(e.height)||e.height<0?this.#g.height:e.height,t.classList.add("LogicalCircuitUI_Container"),t.classList.add(this.#b),t.style.width=this.#g.width+2+"px",this.#S=new LogicalCircuitToolbar(t,this.#b,this.#y,this.#v,this.#g,this.#O,this.#N,this.#I),this.#x=new LogicalCircuitCanvas(t,this.#b,this.#y,this.#v,this.#g,this.#O,this.#N,this.#I),this.#S.setCanvas(this.#x),this.#x.setToolbar(this.#S),this.setBezierConnector(e.bezierConnector),this.setShowOperatorType(e.showOperatorType),this.setInteractive(e.interactive)}setJSONs(t,e){this.#O.index=0,this.#O.array=[{json:JSON.stringify(t),jsonUI:JSON.stringify(e)}],this.#y.setJSON(t),Object.keys(this.#v).forEach((t=>delete this.#v[t])),Object.assign(this.#v,e),this.#S.setJSONUI(),this.#x.setJSONUI(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}getJSON(){return this.#y.getJSON()}getJSONUI(){return JSON.parse(JSON.stringify(this.#v))}setSimplifier(t){this.#y.setSimplifier(t),this.#S.setSimplifierVisible(!!t)}setReorganizer(t){this.#S.setReorganizer(t)}computeExpressions(t){return this.#y.computeExpressions(t)}computeExpression(t,e){return this.#y.computeExpression(t,e)}getJavaScriptExpressions(){return this.#y.getJavaScriptExpressions()}getJavaScriptExpression(t){return this.#y.getJavaScriptExpression(t)}isValid(){return this.#y.isValid()}setBezierConnector(t){this.#x.setBezierConnector(!!t)}setShowOperatorType(t){this.#x.setShowOperatorType(!!t)}setInteractive(t){this.#x.setInteractive(!!t)}addOnChangeListener(t){this.#N.push(t)}addOnChangeUIListener(t){this.#I.push(t)}addBlackListWord(t){this.#y.addBlackListWord(t)}}class LogicalCircuitToolbar{#b;#y;#v;#g;#O;#N=[];#I=[];#x;#T;#C={top:15,left:15};constructor(t,e,s,i,o,n,h,r){this.#b=e,this.#y=s,this.#v=i,this.#g=o,this.#O=n,this.#N=h,this.#I=r;var a=document.createElement("div");a.classList.add("LogicalCircuitUI_Toolbar"),a.style.width=this.#g.width+2+"px",t.append(a),this.#j(a,"â†¶",null,"UNDO",null,(()=>this.#U()),null,null,"small",!0,!0),this.#j(a,"â†·",null,"REDO",null,(()=>this.#P()),null,null,"small",!0,!0),this.#j(a,"ðŸ—‘",null,"CLEAR",null,(()=>this.#k()),null,"Divide_On_Right","small",!0,!0),this.#w(a),this.#j(a,"OR",null,null,null,(()=>this.#m("OR")),(()=>this.#m("NOR")),null,"medium",!1,!0),this.#j(a,"AND",null,null,null,(()=>this.#m("AND")),(()=>this.#m("NAND")),null,"medium",!1,!0),this.#j(a,"XOR",null,null,null,(()=>this.#m("XOR")),(()=>this.#m("NXOR")),null,"medium",!1,!0),this.#j(a,"NOT",null,null,null,(()=>this.#m("NOT")),null,"Divide_On_Right","medium",!1,!0),this.#j(a,"SIMPLIFY","REORGANIZE",null,null,(()=>this.#E()),(()=>this.#M()),null,"large",!0,!1)}#j(t,e,s,i,o,n,h,r,a,l,c){var u=document.createElement("div");if(u.classList.add("LogicalCircuitUI_Toolbar_ButtonContainer"),r&&u.classList.add(r),t.append(u),n&&(this.#L(u,e,i,a,l,c).onclick=t=>n()),h){var d=s||(e?"N"+e:null),m=o||(i?"N"+i:null);this.#L(u,d,m,a,l,c).onclick=t=>h()}}#w(t){var e=document.createElement("div");e.classList.add("LogicalCircuitUI_Toolbar_TextContainer"),e.classList.add("Divide_On_Right"),t.append(e);var s=document.createElement("input");s.type="text",s.classList.add("IN-OUT"),s.oninput=t=>{var e=!this.#y.isNameValid(s.value)||this.#y.isNameAlreadyUsed(s.value);i.disabled=e,o.disabled=e},e.append(s);var i=this.#L(e,"IN",null,"medium",!0,!0),o=this.#L(e,"OUT",null,"medium",!0,!0);i.onclick=t=>this.#R(s.value),o.onclick=t=>this.#A(s.value)}#L(t,e,s,i,o,n){var h=document.createElement("button");return h.textContent=e,s&&(h.title=s),h.classList.add(s?s.replace(" ","-"):e.replace(" ","-")),h.classList.add(i),h.disabled=o,h.style.visibility=n?"visible":"hidden",t.append(h),h}#U(){this.#O.index--,this.#y.setJSON(JSON.parse(this.#O.array[this.#O.index].json)),Object.keys(this.#v).forEach((t=>delete this.#v[t])),Object.assign(this.#v,JSON.parse(this.#O.array[this.#O.index].jsonUI)),this.setJSONUI(),this.#x.setJSONUI(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}#P(){this.#O.index++,this.#y.setJSON(JSON.parse(this.#O.array[this.#O.index].json)),Object.keys(this.#v).forEach((t=>delete this.#v[t])),Object.assign(this.#v,JSON.parse(this.#O.array[this.#O.index].jsonUI)),this.setJSONUI(),this.#x.setJSONUI(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}#k(){confirm("Do you really want to clear the current logical circuit?")&&(this.#O.index=0,this.#O.array=[{json:"{}",jsonUI:"{}"}],this.#y.clear(),Object.keys(this.#v).forEach((t=>delete this.#v[t])),this.setJSONUI(),this.#x.setJSONUI(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t())))}#R(t){this.#y.addInput(t),this.#D(t),this.#K(),this.setJSONUI(),this.#x.setInteractiveValue(t,!1),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}#A(t){this.#y.addOutput(t),this.#D(t),this.#K(),this.setJSONUI(),this.#x.draw(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}#m(t){var e=this.#y["add"+t]();this.#D(e),this.#K(),this.setJSONUI(),this.#x.draw(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}#D(t){this.#v[t]={top:this.#C.top,left:this.#C.left}}#E(){if(confirm("Do you really want to simplify the current logical circuit?")&&this.#y.simplify()){var t=this.#y.getJSON();Object.keys(this.#v).forEach((t=>delete this.#v[t])),Object.keys(t).filter((t=>"IN"===this.#y.getType(t))).forEach(((t,e,s)=>this.#x.assignPosition(t,e,s,this.#C.left))),Object.keys(t).filter((t=>"NOT"===this.#y.getType(t))).forEach(((t,e,s)=>this.#x.assignPosition(t,e,s,this.#g.width/5))),Object.keys(t).filter((t=>"AND"===this.#y.getType(t))).forEach(((t,e,s)=>this.#x.assignPosition(t,e,s,2*this.#g.width/5))),Object.keys(t).filter((t=>"OR"===this.#y.getType(t))).forEach(((t,e,s)=>this.#x.assignPosition(t,e,s,3*this.#g.width/5))),Object.keys(t).filter((t=>"OUT"===this.#y.getType(t))).forEach(((t,e,s)=>this.#x.assignPosition(t,e,s,4*this.#g.width/5)));try{this.#x.draw();var e=[];Object.keys(this.#v).filter((t=>"IN"!==this.#y.getType(t))).forEach((t=>this.#y.getFrom(t).forEach((s=>e.push({from:s,to:t})))));var s=this.#T(this.#x.getSymbolSize(),e,this.#g.width,this.#g.height);Object.assign(this.#v,s),this.#x.draw()}catch(t){}this.#K(),this.resetButtons(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}}#M(){if(confirm("Do you really want to reorganize the current logical circuit?"))try{var t=[];Object.keys(this.#v).filter((t=>"IN"!==this.#y.getType(t))).forEach((e=>this.#y.getFrom(e).forEach((s=>t.push({from:s,to:e})))));var e=this.#T(this.#x.getSymbolSize(),t,this.#g.width,this.#g.height);Object.keys(this.#v).forEach((t=>delete this.#v[t])),Object.assign(this.#v,e),this.#K(),this.resetButtons(),this.#x.draw(),this.#I.forEach((t=>t()))}catch(t){}}#K(){this.#O.array.splice(this.#O.index+1),this.#O.index++,this.#O.array.push({json:JSON.stringify(this.#y.getJSON()),jsonUI:JSON.stringify(this.#v)})}setCanvas(t){this.#x=t}setJSONUI(){this.resetButtons(),this.#V()}resetButtons(){var t=this.#y.isEmpty()||!this.#y.isValid();document.querySelector("."+this.#b+" button.UNDO").disabled=0===this.#O.index,document.querySelector("."+this.#b+" button.REDO").disabled=this.#O.index===this.#O.array.length-1,document.querySelector("."+this.#b+" button.CLEAR").disabled=this.#y.isEmpty(),document.querySelector("."+this.#b+" button.SIMPLIFY").disabled=t,document.querySelector("."+this.#b+" button.REORGANIZE").disabled=t}#V(){document.querySelector("."+this.#b+" input.IN-OUT").value="",document.querySelector("."+this.#b+" button.IN").disabled=!0,document.querySelector("."+this.#b+" button.OUT").disabled=!0}setSimplifierVisible(t){document.querySelector("."+this.#b+" .SIMPLIFY").style.visibility=t?"visible":"hidden"}setReorganizer(t){this.#T=t,document.querySelector("."+this.#b+" .REORGANIZE").style.visibility=t?"visible":"hidden"}}class LogicalCircuitCanvas{#b;#y;#v;#g;#O;#N=[];#I=[];#S;#x;#z;#X={selected:!1};#J={};#B={};#q={};#F={};#W={};#H={};#Y={};#_;#G={font:"48px sans-serif",text:"ðŸ—‘",strokeStyle:"red",left:35,top:20,lineWidth:80,radius1:40,radius2:120,gradients:[{pos:0,color:"rgba(0,0,0,0)"},{pos:.5,color:"rgba(0,0,0,0)"},{pos:1,color:"rgba(0,0,0,0.3)"}]};#Z={gap:20,height:40,ONStyle:"green",OFFStyle:"gray",circleStyle:"white"};#$={radiusLeft:20,lineWidth:30,oneHeight:20,xorGap:12,notRadius:7,font:"9px sans-serif"};#Q={pressed:!1,name:"",index:-1,referenceName:"",event:null,canDoStrokeStyle:"green",cannotDoStrokeStyle:"orange",lineWidth:3,radius:5};#tt={grab:"grab",pointer:"pointer",notAllowed:"not-allowed",grabbing:"grabbing"};#et={name:"",index:-1,referencePath:"",referenceName:"",lineWidth:3,strokeStyle:"green"};#st={pressed:!1,name:"",offsetLeft:0,offsetTop:0};#it={selected:!1,name:"",direction:"",font:"14px sans-serif",up:"-",down:"+",max:6,canDoFillStyle:"white",cannotDoFillStyle:"gray"};constructor(t,e,s,i,o,n,h,r){this.#b=e,this.#y=s,this.#v=i,this.#g=o,this.#O=n,this.#N=h,this.#I=r,this.#x=document.createElement("canvas"),this.#x.classList.add("LogicalCircuitUI_Canvas"),this.#x.width=this.#g.width,this.#x.height=this.#g.height,this.#x.onmousemove=t=>this.#ot(t),this.#x.onmousedown=t=>this.#nt(t),this.#x.onmouseup=t=>this.#ht(t),t.append(this.#x),this.#z=this.#x.getContext("2d"),this.#z.font=this.#g.font,this.#z.textBaseline="middle",this.#z.lineWidth=this.#g.lineWidth,this.#z.lineJoin="round",this.draw()}setToolbar(t){this.#S=t}setJSONUI(){this.setInteractive(this.#g.interactive)}setBezierConnector(t){this.#g.bezierConnector=t,this.draw()}setShowOperatorType(t){this.#g.showOperatorType=t,this.draw()}setInteractive(t){this.#g.interactive=!!t,this.#X.selected=!1,this.#J={},t&&Object.keys(this.#v).filter((t=>"IN"===this.#y.getType(t))).forEach((t=>this.#J[t]=!1)),this.draw()}setInteractiveValue(t,e){this.#g.interactive&&(this.#J[t]=e),this.draw()}getSymbolSize(){return Object.keys(this.#H).filter((t=>!this.#v[t])).forEach((t=>delete this.#H[t])),JSON.parse(JSON.stringify(this.#H))}assignPosition(t,e,s,i){this.#v[t]={top:(e+1)*this.#x.height/(s.length+1)-this.#Z.height,left:i}}draw(){this.#x.style.cursor=this.#g.cursor,this.#z.clearRect(0,0,this.#x.width,this.#x.height),this.#rt(),Object.keys(this.#v).forEach((t=>{var e=this.#y.getType(t);switch(e){case"IN":this.#at(t,"exit");break;case"OUT":this.#at(t,"0");break;default:this.#lt(t,e);break}})),Object.keys(this.#v).forEach((t=>{switch(this.#y.getType(t)){case"IN":break;case"OUT":default:this.#y.getFrom(t).forEach(((e,s)=>this.#ct(e,t,s)));break}})),this.#ut(),this.#dt()}#rt(){this.#z.font=this.#G.font,this.#z.fillText(this.#G.text,this.#x.width-this.#G.left,this.#x.height-this.#G.top),this.#z.font=this.#g.font;var t=this.#z.createRadialGradient(this.#x.width,this.#x.height,this.#G.radius1,this.#x.width,this.#x.height,this.#G.radius2);this.#G.gradients.forEach((e=>t.addColorStop(e.pos,e.color))),this.#z.lineWidth=this.#G.lineWidth,this.#z.strokeStyle=t,this.#z.beginPath(),this.#z.arc(this.#x.width,this.#x.height,this.#G.lineWidth,0,2*Math.PI),this.#z.stroke(),this.#z.lineWidth=this.#g.lineWidth,this.#z.strokeStyle=this.#g.strokeStyle}#at(t,e){var s=this.#z.measureText(t).width+this.#Z.gap+(this.#g.interactive?this.#Z.gap:0),i=this.#v[t].top+this.#Z.height/2;if(this.#F[t+"*"+e]={left:this.#v[t].left+("exit"===e?s+this.#Q.radius:-this.#Q.radius),top:i},this.#mt(t+"*"+e),this.#H[t]={width:s,height:this.#Z.height},this.#W[t]=new Path2D,this.#W[t].rect(this.#v[t].left,this.#v[t].top,s,this.#Z.height),this.#z.stroke(this.#W[t]),this.#g.interactive){var o;o="exit"===e?this.#J[t]?this.#Z.ONStyle:this.#Z.OFFStyle:this.#y.isValid()?this.#y.computeExpression(t,this.#J)?this.#Z.ONStyle:this.#Z.OFFStyle:this.#Z.circleStyle;var n=this.#Z.gap/2-2,h=o===this.#Z.ONStyle?this.#v[t].top+2+n+2:this.#v[t].top+this.#Z.height-2-n-2,r=new Path2D;r.roundRect(this.#v[t].left+s-this.#Z.gap-2,this.#v[t].top+2,this.#Z.gap,this.#Z.height-4,this.#Z.gap/2),"exit"===e&&(this.#B[t]=r),this.#z.fillStyle=o,this.#z.fill(r),this.#z.fillStyle=this.#Z.circleStyle,this.#z.beginPath(),this.#z.arc(this.#v[t].left+s-this.#Z.gap/2-2,h,n,0,2*Math.PI),this.#z.fill(),this.#z.fillStyle=this.#g.strokeStyle}this.#z.fillText(t,this.#v[t].left+this.#Z.gap/2,this.#F[t+"*"+e].top)}#lt(t,e){this.#W[t]=new Path2D;var s=this.#y.getFrom(t),i=this.#$.oneHeight*s.length/2,o=this.#v[t].left+this.#$.lineWidth+("NOT"===e?this.#$.radiusLeft:0),n=this.#v[t].top+this.#$.oneHeight*("NOT"===e?2:s.length),h=this.#v[t].top+("NOT"===e?this.#$.oneHeight:i);this.#ft(t,e,o,h),this.#pt(t,e,s,h,i),this.#bt(t,e,s,o,h),this.#yt(t,e,o,n,h,i),this.#vt(t,e)}#ft(t,e,s,i){switch(e){case"OR":case"AND":case"XOR":this.#F[t+"*exit"]={left:s+this.#$.radiusLeft+this.#Q.radius,top:i};break;case"NOR":case"NAND":case"NXOR":this.#F[t+"*exit"]={left:s+this.#$.radiusLeft+2*this.#$.notRadius+this.#Q.radius,top:i};break;case"NOT":this.#F[t+"*exit"]={left:s+2*this.#$.notRadius+this.#Q.radius,top:i};break}this.#mt(t+"*exit")}#pt(t,e,s,i,o){for(var n=Math.PI/(s.length+1),h=0;h<s.length;h++){switch(e){case"OR":case"NOR":var r=n*(h+1)-Math.PI/2;this.#F[t+"*"+h]={left:this.#v[t].left+(this.#$.radiusLeft-this.#Q.radius)*Math.cos(r),top:i+(o-this.#Q.radius)*Math.sin(r)};break;case"AND":case"NAND":this.#F[t+"*"+h]={left:this.#v[t].left-this.#Q.radius,top:this.#v[t].top+this.#$.oneHeight/2+this.#$.oneHeight*h};break;case"XOR":case"NXOR":r=n*(h+1)-Math.PI/2;this.#F[t+"*"+h]={left:this.#v[t].left+(this.#$.radiusLeft-this.#Q.radius)*Math.cos(r)-this.#$.xorGap,top:i+(o-this.#Q.radius)*Math.sin(r)};break;case"NOT":this.#F[t+"*"+h]={left:this.#v[t].left-this.#Q.radius,top:i};break}this.#mt(t+"*"+h)}}#bt(t,e,s,i,o){switch(e){case"OR":case"AND":case"XOR":this.#H[t]={width:this.#$.lineWidth+this.#$.radiusLeft,height:this.#$.oneHeight*s.length};break;case"NOR":case"NAND":case"NXOR":(n=new Path2D).arc(i+this.#$.radiusLeft+this.#$.notRadius,o,this.#$.notRadius,0,2*Math.PI),this.#W[t].addPath(n),this.#H[t]={width:this.#$.lineWidth+this.#$.radiusLeft+2*this.#$.notRadius,height:this.#$.oneHeight*s.length};break;case"NOT":var n;(n=new Path2D).arc(i+this.#$.notRadius,o,this.#$.notRadius,0,2*Math.PI),this.#W[t].addPath(n),this.#H[t]={width:this.#$.lineWidth+this.#$.radiusLeft+2*this.#$.notRadius,height:2*this.#$.oneHeight};break}}#yt(t,e,s,i,o,n){switch("NOT"!==e&&(this.#W[t].moveTo(s,i),this.#W[t].lineTo(this.#v[t].left,i)),e){case"OR":case"NOR":this.#W[t].ellipse(this.#v[t].left,o,this.#$.radiusLeft,n,0,Math.PI/2,-Math.PI/2,!0),this.#W[t].lineTo(s,this.#v[t].top),this.#W[t].quadraticCurveTo(s+3*this.#$.radiusLeft/5,this.#v[t].top,s+this.#$.radiusLeft,o),this.#W[t].quadraticCurveTo(s+3*this.#$.radiusLeft/5,i,s,i);break;case"AND":case"NAND":this.#W[t].lineTo(this.#v[t].left,this.#v[t].top),this.#W[t].lineTo(s,this.#v[t].top),this.#W[t].ellipse(s,o,this.#$.radiusLeft,n,0,-Math.PI/2,Math.PI/2);break;case"XOR":case"NXOR":this.#W[t].ellipse(this.#v[t].left,o,this.#$.radiusLeft,n,0,Math.PI/2,-Math.PI/2,!0),this.#W[t].lineTo(s,this.#v[t].top),this.#W[t].ellipse(s,o,this.#$.radiusLeft,n,0,-Math.PI/2,Math.PI/2);var h=new Path2D;h.ellipse(this.#v[t].left-this.#$.xorGap,o,this.#$.radiusLeft,n,0,Math.PI/2,-Math.PI/2,!0),this.#W[t].addPath(h);break;case"NOT":this.#W[t].moveTo(this.#v[t].left,this.#v[t].top),this.#W[t].lineTo(s,o),this.#W[t].lineTo(this.#v[t].left,i),this.#W[t].closePath();break}this.#z.stroke(this.#W[t])}#vt(t,e){if(this.#g.showOperatorType){var s;switch(this.#z.font=this.#$.font,e){case"OR":case"XOR":s=this.#$.radiusLeft+(this.#H[t].width-this.#$.radiusLeft-this.#z.measureText(e).width)/2;break;case"AND":s=(this.#H[t].width-this.#z.measureText(e).width)/2;break;case"NOR":case"NXOR":s=this.#$.radiusLeft+(this.#H[t].width-this.#$.radiusLeft-this.#z.measureText(e).width)/2-this.#$.notRadius;break;case"NAND":s=(this.#H[t].width-this.#z.measureText(e).width)/2-this.#$.notRadius;break;case"NOT":s=(this.#H[t].width-this.#z.measureText(e).width)/4;break}this.#z.fillText(e,this.#v[t].left+s,this.#v[t].top+this.#H[t].height/2),this.#z.font=this.#g.font}}#mt(t){this.#q[t]=new Path2D,this.#q[t].moveTo(this.#F[t].left,this.#F[t].top-this.#Q.radius),this.#q[t].lineTo(this.#F[t].left+this.#Q.radius,this.#F[t].top),this.#q[t].lineTo(this.#F[t].left,this.#F[t].top+this.#Q.radius),this.#q[t].lineTo(this.#F[t].left-this.#Q.radius,this.#F[t].top),this.#q[t].closePath(),this.#z.stroke(this.#q[t])}#ct(t,e,s){if(t){if(this.#Y[e+"*"+s]=new Path2D,this.#Y[e+"*"+s].moveTo(this.#F[t+"*exit"].left,this.#F[t+"*exit"].top),this.#g.bezierConnector){var i={left:this.#F[t+"*exit"].left+(this.#F[e+"*"+s].left-this.#F[t+"*exit"].left)/2,top:this.#F[t+"*exit"].top},o={left:i.left,top:this.#F[e+"*"+s].top};this.#Y[e+"*"+s].bezierCurveTo(i.left,i.top,o.left,o.top,this.#F[e+"*"+s].left,this.#F[e+"*"+s].top)}else this.#Y[e+"*"+s].lineTo(this.#F[e+"*"+s].left,this.#F[e+"*"+s].top);this.#z.stroke(this.#Y[e+"*"+s])}}#ut(){if(this.#et.name){var t=this.#y.getType(this.#et.name);"symbolPath"!==this.#et.referencePath||(this.#g.interactive&&"IN"===t?(this.#X.selected=this.#z.isPointInPath(this.#B[this.#et.name],this.#_.offsetX,this.#_.offsetY),this.#x.style.cursor=this.#X.selected?this.#tt.pointer:this.#tt.grab):["IN","OUT","NOT"].includes(t)?this.#x.style.cursor=this.#tt.grab:this.#gt()),this.#Ot()}else;}#gt(){var t=this.#v[this.#et.name].left+3*this.#H[this.#et.name].width/5;switch(this.#y.getType(this.#et.name)){case"OR":case"AND":case"XOR":break;case"NOR":case"NAND":case"NXOR":t-=this.#$.notRadius;break}var e=this.#y.getFrom(this.#et.name).length,s=this.#v[this.#et.name].top+this.#H[this.#et.name].height/4,i=this.#v[this.#et.name].top+3*this.#H[this.#et.name].height/4;this.#z.font=this.#it.font;var o=this.#z.measureText(this.#it.up).width,n=this.#z.measureText(this.#it.down).width,h=Math.max(o,n),r=new Path2D,a=new Path2D;this.#z.fillStyle=e>2?this.#it.canDoFillStyle:this.#it.cannotDoFillStyle,a.rect(t-2,this.#v[this.#et.name].top+3,h+4,this.#H[this.#et.name].height/2-3),r.addPath(a),this.#z.fill(a),this.#z.stroke(a),a=new Path2D,this.#z.fillStyle=e<this.#it.max?this.#it.canDoFillStyle:this.#it.cannotDoFillStyle,a.rect(t-2,this.#v[this.#et.name].top+this.#H[this.#et.name].height/2,h+4,this.#H[this.#et.name].height/2-3),r.addPath(a),this.#z.fill(a),this.#z.stroke(a),this.#z.fillStyle=this.#g.fillStyle,this.#z.fillText(this.#it.up,t+(h-o)/2,s),this.#z.fillText(this.#it.down,t+(h-n)/2,i),this.#z.font=this.#g.font,this.#it.selected=this.#z.isPointInPath(r,this.#_.offsetX,this.#_.offsetY),this.#it.name=this.#et.name,this.#it.direction=this.#_.offsetY<this.#v[this.#et.name].top+this.#H[this.#et.name].height/2?"UP":"DOWN",this.#it.selected?"UP"===this.#it.direction&&e>2||"DOWN"===this.#it.direction&&e<this.#it.max?this.#x.style.cursor=this.#tt.pointer:this.#x.style.cursor=this.#tt.notAllowed:this.#x.style.cursor=this.#tt.grab}#Ot(){this.#z.lineWidth=this.#et.lineWidth,this.#st.pressed?(this.#x.style.cursor=this.#tt.grabbing,this.#z.strokeStyle=this.#Nt(this.#x.width,this.#x.height,this.#G.lineWidth,this.#v[this.#et.name].left,this.#v[this.#et.name].top,this.#H[this.#et.name].width,this.#H[this.#et.name].height)?this.#G.strokeStyle:this.#et.strokeStyle):this.#z.strokeStyle="connectorPath"===this.#et.referencePath?this.#G.strokeStyle:this.#et.strokeStyle,this.#z.stroke(this.#It(this.#et.referencePath,this.#et.referenceName)),this.#z.lineWidth=this.#g.lineWidth,this.#z.strokeStyle=this.#g.strokeStyle}#Nt(t,e,s,i,o,n,h){var r=t,a=e;t<i?r=i:t>i+n&&(r=i+n),e<o?a=o:e>o+h&&(a=o+h);var l=t-r,c=e-a;return Math.sqrt(l*l+c*c)<=s}#It(t,e){switch(t){case"symbolPath":return this.#W[e];case"knobPath":return this.#q[e];case"connectorPath":return this.#Y[e]}}#dt(){if(this.#Q.pressed){if(this.#z.beginPath(),this.#z.moveTo(this.#Q.event.offsetX,this.#Q.event.offsetY),this.#g.bezierConnector){var t={left:this.#Q.event.offsetX+(this.#_.offsetX-this.#Q.event.offsetX)/2,top:this.#Q.event.offsetY},e={left:t.left,top:this.#_.offsetY};this.#z.bezierCurveTo(t.left,t.top,e.left,e.top,this.#_.offsetX,this.#_.offsetY)}else this.#z.lineTo(this.#_.offsetX,this.#_.offsetY);this.#z.stroke(),this.#Q.name&&(this.#z.lineWidth=this.#Q.lineWidth,this.#z.strokeStyle=this.#xt(this.#et.name,this.#et.index,this.#Q.name,this.#Q.index)?this.#Q.canDoStrokeStyle:this.#Q.cannotDoStrokeStyle,this.#z.stroke(this.#q[this.#Q.referenceName]),this.#z.lineWidth=this.#g.lineWidth,this.#z.strokeStyle=this.#g.strokeStyle)}}#ot(t){this.#_=t;var e=Math.sqrt(Math.pow(t.offsetX-this.#x.width,2)+Math.pow(t.offsetY-this.#x.height,2));this.#x.setAttribute("title",e<this.#G.radius2?"To trash an element move and release it here":""),this.#st.pressed?(this.#v[this.#et.name].top=t.offsetY-this.#st.offsetTop,this.#v[this.#et.name].left=t.offsetX-this.#st.offsetLeft):this.#Q.pressed?this.#St(t):this.#Tt(t),this.draw()}#St(t){this.#Q.name="",Object.keys(this.#v).forEach((e=>{switch(this.#y.getType(e)){case"IN":!this.#Q.name&&this.#z.isPointInPath(this.#q[e+"*exit"],t.offsetX,t.offsetY)&&(this.#Q.name=e,this.#Q.index=-1,this.#Q.referenceName=e+"*exit");break;case"OUT":this.#y.getFrom(e).forEach(((s,i)=>{!this.#Q.name&&this.#z.isPointInPath(this.#q[e+"*"+i],t.offsetX,t.offsetY)&&(this.#Q.name=e,this.#Q.index=i,this.#Q.referenceName=e+"*"+i)}));break;default:!this.#Q.name&&this.#z.isPointInPath(this.#q[e+"*exit"],t.offsetX,t.offsetY)&&(this.#Q.name=e,this.#Q.index=-1,this.#Q.referenceName=e+"*exit"),this.#y.getFrom(e).forEach(((s,i)=>{!this.#Q.name&&this.#z.isPointInPath(this.#q[e+"*"+i],t.offsetX,t.offsetY)&&(this.#Q.name=e,this.#Q.index=i,this.#Q.referenceName=e+"*"+i)}));break}}))}#Tt(t){this.#et.name="",Object.keys(this.#v).forEach((e=>{switch(this.#y.getType(e)){case"IN":!this.#et.name&&this.#z.isPointInPath(this.#q[e+"*exit"],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=-1,this.#et.referencePath="knobPath",this.#et.referenceName=e+"*exit");break;case"OUT":!this.#et.name&&this.#z.isPointInPath(this.#q[e+"*0"],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=0,this.#et.referencePath="knobPath",this.#et.referenceName=e+"*0"),!this.#et.name&&this.#y.getFrom(e)[0]&&this.#z.isPointInStroke(this.#Y[e+"*0"],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=0,this.#et.referencePath="connectorPath",this.#et.referenceName=e+"*0");break;default:!this.#et.name&&this.#z.isPointInPath(this.#q[e+"*exit"],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=-1,this.#et.referencePath="knobPath",this.#et.referenceName=e+"*exit"),this.#y.getFrom(e).forEach(((s,i)=>{!this.#et.name&&this.#z.isPointInPath(this.#q[e+"*"+i],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=i,this.#et.referencePath="knobPath",this.#et.referenceName=e+"*"+i),!this.#et.name&&s&&this.#z.isPointInStroke(this.#Y[e+"*"+i],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.index=i,this.#et.referencePath="connectorPath",this.#et.referenceName=e+"*"+i)}));break}!this.#et.name&&this.#z.isPointInPath(this.#W[e],t.offsetX,t.offsetY)&&(this.#et.name=e,this.#et.referencePath="symbolPath",this.#et.referenceName=e)}))}#nt(t){if(this.#et.name)switch(this.#et.referencePath){case"knobPath":this.#Q.pressed=!0,this.#Q.event=t;break;case"symbolPath":if(this.#it.selected){var e=!1,s=this.#y.getFrom(this.#it.name).length;switch(this.#it.direction){case"UP":s>2&&(e=!0,this.#y.decConnector(this.#it.name),this.#v[this.#it.name].top+=this.#$.oneHeight/2);break;case"DOWN":s<this.#it.max&&(e=!0,this.#y.incConnector(this.#it.name),this.#v[this.#it.name].top-=this.#$.oneHeight/2);break}e&&(this.#K(),this.#S.resetButtons(),this.draw(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t())))}else this.#X.selected?(this.#J[this.#et.name]=!this.#J[this.#et.name],this.draw()):(this.#st.pressed=!0,this.#st.offsetLeft=t.offsetX-this.#v[this.#et.name].left,this.#st.offsetTop=t.offsetY-this.#v[this.#et.name].top,this.#x.style.cursor=this.#tt.grabbing);break;case"connectorPath":this.#y.removeConnection(this.#et.name,this.#et.index),this.#et.name="",this.#K(),this.#S.resetButtons(),this.draw(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()));break}}#ht(t){if(this.#et.name&&this.#st.pressed){var e=!1;this.#Nt(this.#x.width,this.#x.height,this.#G.lineWidth,this.#v[this.#et.name].left,this.#v[this.#et.name].top,this.#H[this.#et.name].width,this.#H[this.#et.name].height)&&(e=!0,this.#y.remove(this.#et.name),delete this.#v[this.#et.name],this.#et.name=""),this.#K(),this.#S.resetButtons(),this.draw(),e&&this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}else if(this.#Q.pressed&&this.#Q.name&&this.#xt(this.#et.name,this.#et.index,this.#Q.name,this.#Q.index)){var s=this.#y.getType(this.#et.name),i=this.#y.getType(this.#Q.name);"IN"===s?this.#y.addConnection(this.#et.name,this.#Q.name,this.#Q.index):"IN"===i?this.#y.addConnection(this.#Q.name,this.#et.name,this.#et.index):"OUT"===s?this.#y.addConnection(this.#Q.name,this.#et.name,0):"OUT"===i?this.#y.addConnection(this.#et.name,this.#Q.name,0):-1===this.#et.index?this.#y.addConnection(this.#et.name,this.#Q.name,this.#Q.index):-1===this.#Q.index&&this.#y.addConnection(this.#Q.name,this.#et.name,this.#et.index),this.#K(),this.#S.resetButtons(),this.draw(),this.#N.forEach((t=>t())),this.#I.forEach((t=>t()))}this.#Q.pressed=!1,this.#st.pressed=!1,this.#it.selected=!1}#K(){this.#O.array.splice(this.#O.index+1),this.#O.index++,this.#O.array.push({json:JSON.stringify(this.#y.getJSON()),jsonUI:JSON.stringify(this.#v)})}#xt(t,e,s,i){var o=this.#y.getType(t),n=this.#y.getType(s);return("IN"!==o||"IN"!==n)&&("IN"===o&&"OUT"===n?this.#y.isConnectionValid(t,s):"IN"===o?-1!==i&&this.#y.isConnectionValid(t,s):"OUT"===o&&"IN"===n?this.#y.isConnectionValid(s,t):("OUT"!==o||"OUT"!==n)&&("OUT"===o?-1===i&&this.#y.isConnectionValid(s,t):"IN"===n?-1!==e&&this.#y.isConnectionValid(s,t):"OUT"===n?-1===e&&this.#y.isConnectionValid(t,s):(-1!==e||-1!==i)&&((-1===e||-1===i)&&(-1===e?this.#y.isConnectionValid(t,s):-1===i&&this.#y.isConnectionValid(s,t)))))}}class ProductTerm{static identity=new ProductTerm(0,0,[]);value;mask;numLiterals;variableNames;numVars;coverCount;constructor(t,e,s){this.value=t,this.mask=e,this.numLiterals=this.countBits(e),this.variableNames=s,this.numVars=s.length,this.coverCount=0}getValue(){return this.value}getMask(){return this.mask}getVariableNames(){return this.variableNames}isMinterm(){return this.numLiterals===this.numVars}incrementCoverCount(){++this.coverCount}getCoverCount(){return this.coverCount}reduces(t){if(t.mask===this.mask){if(0===this.mask)return identity;var e=t.value&this.mask^this.value&this.mask;if(1===this.countBits(e))return new ProductTerm(~e&this.value,~e&this.mask,this.variableNames)}return null}covers(t){return(this.value&this.mask)==(t.getValue()&this.mask)}countBits(t){for(var e=0,s=0;s<32;++s)0!=(t&1<<s)&&++e;return e}compareTo(t){return this.coverCount-t.coverCount}equals(t){return this.value===t.getValue()&&this.mask===t.getMask()}ptString(){if(0===this.mask)return"1";for(var t=[],e=0;e<this.numVars;++e)0!=(this.mask&1<<e)&&(0==(this.value&1<<e)?t.push("NOT "+this.variableNames[e]):t.push(this.variableNames[e]));return"("+t.join(" AND ")+")"}toString(){return this.ptString()}}class PrimeImplicant extends ProductTerm{coversArray=[];constructor(t){super(t.getValue(),t.getMask(),t.getVariableNames())}addCover(t){if(!t.isMinterm())throw"Attempt to add "+t.toString()+" to the list of minterms covered by prime implicant "+super.toString()+", but "+t.toString()+" is not a minterm.";if(!this.covers(t))throw"Attempt to add "+t.toString()+" to the list of minterms covered by prime implicant "+super.toString()+", but "+t.toString()+" is not covered by "+super.toString();this.coversArray.push(t)}compareTo(t){return t.coversArray.length-this.coversArray.length}toString(){for(var t="[ "+super.toString()+": ",e=0;e<this.coversArray.length;++e)t+=this.coversArray.elementAt(e),e<this.coversArray.length-1&&(t+=", ");return t+=" ]"}}class TruthTable{numVars=0;numRows=0;numMinterms=0;variableNames=null;namesReversed;normalized="Not Given";theTable=null;mintermMask;minterms=null;constructor(t){if(this.numMinterms=t.length,0===this.numMinterms)this.numVars=0,this.numRows=0,this.variableNames=[],this.namesReversed=this.variableNames,this.normalized="",this.theTable=[],this.mintermMask=0,this.minterms=[];else{t.sort(((t,e)=>t-e));var e=t[this.numMinterms-1];e<0&&(e=0);var s,i=this.leftBit(e);for(i<0&&(i=0),this.numRows=Math.pow(2,i+1),this.mintermMask=this.numRows-1,this.numVars=Math.ceil(Math.log(this.numRows)/Math.log(2)),this.variableNames=Array(this.numVars),s=0;s<this.numVars;++s)this.variableNames[s]=String.fromCharCode(65+s);for(this.namesReversed=Array(this.numVars),s=0;s<this.numVars;++s)this.namesReversed[s]=this.variableNames[this.numVars-s-1];for(this.theTable=Array(this.numRows).fill(!1),this.minterms=Array(this.numMinterms),s=0;s<this.numMinterms;++s)this.theTable[t[s]]=!0,this.minterms[s]=new ProductTerm(this.reverseBits(t[s],this.numVars),this.mintermMask,this.variableNames)}}leftBit(t){for(var e=31;e>=0;--e)if(0!=(t&1<<e))return e;return-1}reverseBits(t,e){for(var s=1<<e-1,i=1,o=t&~(Math.pow(2,e)-1),n=0;n<e;++n)0!=(t&s)&&(o|=i),s>>=1,i<<=1;return o}toString(){var1="[";for(var t=0;t<this.minterms.length;++t)var1+=this.reverseBits(this.minterms[t].value,this.numVars)+",";return 0===this.minterms.length?var1+="]":var1=var1.substring(0,var1.length-1)+"]",var1}}class QuineMcCluskey extends TruthTable{numLevels;levelTerms;primeImplicants;minimum;timesCovered;findAll;constructor(t,e){super(t),this.numLevels=this.numVars+1,this.levelTerms=Array(this.numLevels),this.findAll=!0,this.initialize(e)}initialize(t){this.levelTerms[0]=[];for(var e=0;e<this.numMinterms;++e)this.levelTerms[0].push(this.minterms[e]);var s=null,i=null,o=0;if(this.numVars>0)t:for(o=1;o<this.numLevels;++o){var n=0;this.levelTerms[o]=[];var h=this.levelTerms[o-1].slice().reverse();e:for(;h.length;){s=h.pop();for(var r=!1,a=this.levelTerms[o-1].slice().reverse();;){do{if(!a.length){r||this.levelTerms[o].push(s);continue e}i=a.pop().reduces(s)}while(null===i);++n;for(var l=!1,c=this.levelTerms[o].slice().reverse();c.length;)if(i.equals(c.pop())){l=!0;break}if(!l&&(this.levelTerms[o].push(i),ProductTerm.identity.equals(i)))break t;r=!0}}if(0===n)break}this.primeImplicants=[];for(var u=this.levelTerms[o].slice().reverse();u.length;)this.primeImplicants.push(new PrimeImplicant(u.pop()));for(var d=0;d<this.numMinterms;++d){for(var m=this.levelTerms[0][d],f=this.primeImplicants.slice().reverse();f.length;){var p=f.pop();p.covers(m)&&(m.incrementCoverCount(),p.addCover(m))}if(0===m.getCoverCount())throw"Minterm "+this.reverseBits(m.value,this.numVars)+" is not covered by any prime implicants."}this.primeImplicants.sort(((t,e)=>t.compareTo(e)));var b=this.levelTerms[0].slice();b.sort(((t,e)=>t.compareTo(e)));var y=this.primeImplicants.slice();for(this.minimum=[];b.length>0;)for(var v=b[0],g=0;g<y.length;++g){var O=y[g];if(O.covers(v)){for(this.minimum.push(O),u=O.coversArray.slice().reverse();u.length;){var N=u.pop();b=b.filter((t=>!t.equals(N)))}y=y.filter((t=>!t.equals(O)))}}}toString(){if(0===this.minimum.length)return"0";for(var t="",e=0;e<this.minimum.length;++e){t+=this.minimum[e].ptString(),e<this.minimum.length-1&&(t+=" OR ")}return new String(t)}}